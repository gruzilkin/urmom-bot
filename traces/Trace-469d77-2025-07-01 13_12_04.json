{"batches":[{"resource":{"attributes":[{"key":"service.instance.id","value":{"stringValue":"45bad77c8ec3"}},{"key":"telemetry.sdk.language","value":{"stringValue":"python"}},{"key":"telemetry.sdk.name","value":{"stringValue":"opentelemetry"}},{"key":"telemetry.sdk.version","value":{"stringValue":"1.34.1"}},{"key":"service.name","value":{"stringValue":"urmom-bot"}}],"droppedAttributesCount":0},"instrumentationLibrarySpans":[{"spans":[{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"fb37215bd2ebc360","parentSpanId":"","traceState":"","name":"on_message","kind":"SPAN_KIND_CONSUMER","startTimeUnixNano":1751343028388295200,"endTimeUnixNano":1751343050108371500,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}}],"instrumentationLibrary":{"name":"urmom_bot_tracer","version":""}}]},{"resource":{"attributes":[{"key":"service.instance.id","value":{"stringValue":"45bad77c8ec3"}},{"key":"telemetry.sdk.language","value":{"stringValue":"python"}},{"key":"telemetry.sdk.name","value":{"stringValue":"opentelemetry"}},{"key":"telemetry.sdk.version","value":{"stringValue":"1.34.1"}},{"key":"service.name","value":{"stringValue":"urmom-bot"}}],"droppedAttributesCount":0},"instrumentationLibrarySpans":[{"spans":[{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"801ee1b78bca518a","parentSpanId":"fb37215bd2ebc360","traceState":"","name":"generate_general_response","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343031943419400,"endTimeUnixNano":1751343049753577700,"attributes":[{"key":"ai_backend","value":{"stringValue":"gemini_flash"}},{"key":"temperature","value":{"doubleValue":0.5}},{"key":"cleaned_query","value":{"stringValue":"what do you know about chat members"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"96a16ecc22e7e615","parentSpanId":"801ee1b78bca518a","traceState":"","name":"get_memories","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042889436200,"endTimeUnixNano":1751343043475270000,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":1333878858138652700}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""},"events":[{"timeUnixNano":1751343043472977400,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '16s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/memory_manager.py\", line 83, in get_memories\n    current_day_summary = await self._get_current_day_summary(guild_id, user_id, today)\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 180, in _get_current_day_summary\n    summary = await self._generate_daily_summary(guild_id, user_id, for_date)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"75c53f32f56863e5","parentSpanId":"96a16ecc22e7e615","traceState":"","name":"get_current_day_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042889770000,"endTimeUnixNano":1751343043463986200,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":1333878858138652700}},{"key":"for_date","value":{"stringValue":"2025-07-01"}},{"key":"cache_hit","value":{"boolValue":false}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343043461848300,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '16s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 180, in _get_current_day_summary\n    summary = await self._generate_daily_summary(guild_id, user_id, for_date)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343043463981300,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '16s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 180, in _get_current_day_summary\n    summary = await self._generate_daily_summary(guild_id, user_id, for_date)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n "}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"218449fbe1ff45f7","parentSpanId":"75c53f32f56863e5","traceState":"","name":"generate_daily_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042889820200,"endTimeUnixNano":1751343043459700500,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":1333878858138652700}},{"key":"for_date","value":{"stringValue":"2025-07-01"}},{"key":"message_count","value":{"intValue":273}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343043457729000,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '16s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n  "}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343043459695600,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '16s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/li"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"bc66cce3844ce676","parentSpanId":"218449fbe1ff45f7","traceState":"","name":"get_display_name","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343042911566600,"endTimeUnixNano":1751343042916681700,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":285005165772406800}},{"key":"cache_hit","value":{"boolValue":true}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"aa6fcc5f67f331b0","parentSpanId":"218449fbe1ff45f7","traceState":"","name":"generate_content","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343042918179000,"endTimeUnixNano":1751343043455666700,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343043453836000,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '16s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 153, in iter\n    result = await acti"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343043455661800,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '16s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/_utils."}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"0e2db0774d417548","parentSpanId":"96a16ecc22e7e615","traceState":"","name":"get_historical_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343043473058000,"endTimeUnixNano":1751343043475259600,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":1333878858138652700}},{"key":"current_date","value":{"stringValue":"2025-07-01"}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"daily_summaries_count","value":{"intValue":0}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"812186cc0de1c170","parentSpanId":"801ee1b78bca518a","traceState":"","name":"generate_content","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343043477132300,"endTimeUnixNano":1751343049753406500,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"caf817879a3ab8c0","parentSpanId":"fb37215bd2ebc360","traceState":"","name":"add_chat_message","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343028388541700,"endTimeUnixNano":1751343028401895200,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"channel_id","value":{"intValue":1389122552458121500}},{"key":"message_id","value":{"intValue":1389458109751361500}},{"key":"user_id","value":{"intValue":351724249745981440}},{"key":"message_length","value":{"intValue":59}},{"key":"timestamp","value":{"stringValue":"2025-07-01T04:10:28.248000+00:00"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"8b1c0ccca1a2868a","parentSpanId":"fb37215bd2ebc360","traceState":"","name":"route_request","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343028402083000,"endTimeUnixNano":1751343031943222300,"attributes":[{"key":"message","value":{"stringValue":"BOT  what do you know about chat members"}},{"key":"route","value":{"stringValue":"GENERAL"}},{"key":"reason","value":{"stringValue":"The user is asking for information about chat members, which is a valid question needing AI assistance and doesn't fit into the other routes."}},{"key":"ai_backend","value":{"stringValue":"gemini_flash"}},{"key":"temperature","value":{"doubleValue":0.5}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"6f7c75f07d6fa508","parentSpanId":"8b1c0ccca1a2868a","traceState":"","name":"generate_content","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343028402151400,"endTimeUnixNano":1751343030231435300,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"9674f577c277ea52","parentSpanId":"8b1c0ccca1a2868a","traceState":"","name":"extract_parameters","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343030231718100,"endTimeUnixNano":1751343031943188200,"attributes":[{"key":"route","value":{"stringValue":"GENERAL"}},{"key":"message","value":{"stringValue":"BOT  what do you know about chat members"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"416d60d0e73efc89","parentSpanId":"9674f577c277ea52","traceState":"","name":"generate_content","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343030231774200,"endTimeUnixNano":1751343031943030800,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"a6441b9b87bb4f91","parentSpanId":"801ee1b78bca518a","traceState":"","name":"build_conversation_graph","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343032287771600,"endTimeUnixNano":1751343033172946000,"attributes":[{"key":"total_messages","value":{"intValue":14}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"d0cd2a71a5325761","parentSpanId":"a6441b9b87bb4f91","traceState":"","name":"fetch_history","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343032287842000,"endTimeUnixNano":1751343033172549400,"attributes":[{"key":"message_id","value":{"intValue":1389458109751361500}},{"key":"messages_fetched","value":{"intValue":100}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"ecdcadd2feebb987","parentSpanId":"801ee1b78bca518a","traceState":"","name":"get_display_name","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343033173140200,"endTimeUnixNano":1751343033523336000,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":351724249745981440}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"resolution_method","value":{"stringValue":"guild_member_fetch"}},{"key":"display_name","value":{"stringValue":"gruzilkin"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"c0d40986ce298610","parentSpanId":"6383a13c4a8603ad","traceState":"","name":"get_user_facts","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343033523499800,"endTimeUnixNano":1751343033526853600,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":351724249745981440}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"has_facts","value":{"boolValue":true}},{"key":"facts_length","value":{"intValue":130}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"55305d0b7c7598d7","parentSpanId":"24a5f882e2683a9a","traceState":"","name":"get_chat_messages_for_date","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343033527083800,"endTimeUnixNano":1751343033529097500,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"for_date","value":{"stringValue":"2025-07-01"}},{"key":"message_count","value":{"intValue":273}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"685242beb2ddb01c","parentSpanId":"24a5f882e2683a9a","traceState":"","name":"get_display_name","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343033529678600,"endTimeUnixNano":1751343033816611800,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":969217308159541200}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"resolution_method","value":{"stringValue":"guild_member_fetch"}},{"key":"display_name","value":{"stringValue":"Florent"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"f70763e68b523892","parentSpanId":"24a5f882e2683a9a","traceState":"","name":"get_display_name","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343033816796000,"endTimeUnixNano":1751343034084438000,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":328161381071454200}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"resolution_method","value":{"stringValue":"guild_member_fetch"}},{"key":"display_name","value":{"stringValue":"discl"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"ede931951b38699c","parentSpanId":"24a5f882e2683a9a","traceState":"","name":"get_display_name","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343034088011300,"endTimeUnixNano":1751343034385201200,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":285005165772406800}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"resolution_method","value":{"stringValue":"guild_member_fetch"}},{"key":"display_name","value":{"stringValue":"nemasu"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"0aeb391604e02647","parentSpanId":"24a5f882e2683a9a","traceState":"","name":"get_display_name","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343034397310200,"endTimeUnixNano":1751343034642987000,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":296261099630755840}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"resolution_method","value":{"stringValue":"guild_member_fetch"}},{"key":"display_name","value":{"stringValue":"sam"}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"d466fa552065ce31","parentSpanId":"24a5f882e2683a9a","traceState":"","name":"replace_user_mentions","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343034645340400,"endTimeUnixNano":1751343034745498400,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"text_length","value":{"intValue":69}},{"key":"mentions_count","value":{"intValue":1}},{"key":"result_length","value":{"intValue":56}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"6383a13c4a8603ad","parentSpanId":"801ee1b78bca518a","traceState":"","name":"get_memories","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343033523450600,"endTimeUnixNano":1751343042489734100,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":351724249745981440}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""},"events":[{"timeUnixNano":1751343042489716200,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/memory_manager.py\", line 109, in get_memories\n    merged = await self._merge_context(guild_id, user_id, facts, current_day_summary, historical_summary)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 287, in _merge_context\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"f643037e5b78cf16","parentSpanId":"6383a13c4a8603ad","traceState":"","name":"get_current_day_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343033526969600,"endTimeUnixNano":1751343042168416000,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":351724249745981440}},{"key":"for_date","value":{"stringValue":"2025-07-01"}},{"key":"cache_hit","value":{"boolValue":false}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"24a5f882e2683a9a","parentSpanId":"f643037e5b78cf16","traceState":"","name":"generate_daily_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343033527047400,"endTimeUnixNano":1751343042168200700,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":351724249745981440}},{"key":"for_date","value":{"stringValue":"2025-07-01"}},{"key":"message_count","value":{"intValue":273}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"ad3ce96145753928","parentSpanId":"24a5f882e2683a9a","traceState":"","name":"generate_content","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343034757800400,"endTimeUnixNano":1751343042168134400,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"6f8652f3d460e623","parentSpanId":"6383a13c4a8603ad","traceState":"","name":"get_historical_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042168502300,"endTimeUnixNano":1751343042171491600,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":351724249745981440}},{"key":"current_date","value":{"stringValue":"2025-07-01"}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"daily_summaries_count","value":{"intValue":0}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"051fc213c94f01dd","parentSpanId":"6383a13c4a8603ad","traceState":"","name":"merge_context","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042171531000,"endTimeUnixNano":1751343042480955100,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":351724249745981440}},{"key":"cache_hit","value":{"boolValue":false}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343042478933500,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 287, in _merge_context\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = aw"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343042480949500,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 287, in _merge_context\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"58e37a4a4fe977ae","parentSpanId":"051fc213c94f01dd","traceState":"","name":"generate_content","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343042171659500,"endTimeUnixNano":1751343042476716300,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343042474767600,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 153, in iter\n    result = await acti"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343042476709400,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/_utils."}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"a3a33c568a3fadd4","parentSpanId":"801ee1b78bca518a","traceState":"","name":"get_memories","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042489912300,"endTimeUnixNano":1751343042889350100,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":296261099630755840}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""},"events":[{"timeUnixNano":1751343042886650000,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/memory_manager.py\", line 83, in get_memories\n    current_day_summary = await self._get_current_day_summary(guild_id, user_id, today)\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 180, in _get_current_day_summary\n    summary = await self._generate_daily_summary(guild_id, user_id, for_date)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"0dfb0d95fbfb26f0","parentSpanId":"a3a33c568a3fadd4","traceState":"","name":"get_current_day_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042490584300,"endTimeUnixNano":1751343042877600300,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":296261099630755840}},{"key":"for_date","value":{"stringValue":"2025-07-01"}},{"key":"cache_hit","value":{"boolValue":false}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343042875534000,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 180, in _get_current_day_summary\n    summary = await self._generate_daily_summary(guild_id, user_id, for_date)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343042877596200,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 180, in _get_current_day_summary\n    summary = await self._generate_daily_summary(guild_id, user_id, for_date)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n "}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"6041bb2f7c374566","parentSpanId":"0dfb0d95fbfb26f0","traceState":"","name":"generate_daily_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042490653400,"endTimeUnixNano":1751343042873404400,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":296261099630755840}},{"key":"for_date","value":{"stringValue":"2025-07-01"}},{"key":"message_count","value":{"intValue":273}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343042871432700,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n  "}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343042873400300,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/memory_manager.py\", line 157, in _generate_daily_summary\n    response = await self._gemma_client.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/li"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"b7c4a7e588878214","parentSpanId":"6041bb2f7c374566","traceState":"","name":"generate_content","kind":"SPAN_KIND_CLIENT","startTimeUnixNano":1751343042514235100,"endTimeUnixNano":1751343042869357300,"attributes":[],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":2,"message":""},"events":[{"timeUnixNano":1751343042867443200,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 153, in iter\n    result = await acti"}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"},{"timeUnixNano":1751343042869351700,"attributes":[{"key":"exception.type","value":{"stringValue":"google.genai.errors.ClientError"}},{"key":"exception.message","value":{"stringValue":"429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemma-3-27b'}, 'quotaValue': '15000'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '17s'}]}}"}},{"key":"exception.stacktrace","value":{"stringValue":"Traceback (most recent call last):\n  File \"/app/open_telemetry.py\", line 233, in async_create_span\n    yield span\n  File \"/app/gemma_client.py\", line 93, in generate_content\n    response = await self.client.aio.models.generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 7421, in generate_content\n    response = await self._generate_content(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        model=model, contents=contents, config=parsed_config\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/models.py\", line 6388, in _generate_content\n    response = await self._api_client.async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        'post', path, request_dict, http_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1096, in async_request\n    result = await self._async_request(http_request=http_request, stream=False)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/google/genai/_api_client.py\", line 1042, in _async_request\n    return await self._async_retry(  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self._async_request_once, http_request, stream\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/tenacity/_utils."}},{"key":"exception.escaped","value":{"stringValue":"False"}}],"droppedAttributesCount":0,"name":"exception"}]},{"traceId":"dfa98c1e61d76ce94457d11b7b469d77","spanId":"e1d0fbfa1e11b99c","parentSpanId":"a3a33c568a3fadd4","traceState":"","name":"get_historical_summary","kind":"SPAN_KIND_INTERNAL","startTimeUnixNano":1751343042886729000,"endTimeUnixNano":1751343042889338400,"attributes":[{"key":"guild_id","value":{"intValue":969096083500322800}},{"key":"user_id","value":{"intValue":296261099630755840}},{"key":"current_date","value":{"stringValue":"2025-07-01"}},{"key":"cache_hit","value":{"boolValue":false}},{"key":"daily_summaries_count","value":{"intValue":0}}],"droppedAttributesCount":0,"droppedEventsCount":0,"droppedLinksCount":0,"status":{"code":1,"message":""}}],"instrumentationLibrary":{"name":"urmom_bot_tracer","version":""}}]}]}